# Changelog - remove_one_way_tcp.sh

## Version 1.0.0 - 2024-10-30

### 初始版本

#### 功能特性
- ✅ 识别并过滤单向 TCP 连接（因捕获丢失导致）
- ✅ 支持单个文件、多个文件（逗号分隔）、目录输入
- ✅ 递归扫描子目录中的 pcap/pcapng 文件
- ✅ 可配置 ACK 增量阈值（默认 20）
- ✅ 自动输出文件命名（添加 -OWTR 后缀）
- ✅ 仅在发现单向连接时创建输出文件
- ✅ 支持自定义输出目录

#### 识别算法
1. 方向性检查：仅存在单向报文
2. ACK 进位计算：计算 32 位无符号 ACK 差值
3. 形态学证据：存在纯 ACK 且 ACK 上升
4. 阈值判断：ACK delta > threshold

#### 性能优化
- 使用 AWK 批量处理，避免逐个流调用 tshark
- 一次性提取所有 TCP 报文信息
- 适用于包含数千个 TCP 流的大型文件

#### 兼容性
- Bash 3.2+ (macOS 默认版本)
- 支持 pcap 和 pcapng 格式
- 正确处理 ACK 序号回绕

#### 测试结果
- 测试文件：TC-034-3-20210604-O-A-Front-of-F5.pcap (17M)
- 识别单向流：2818 个
- 输出文件：12M (减少 29%)
- 处理时间：< 30 秒

### 已知问题
- 无

### 修复记录
- 修复了原始文件中的隐藏 Unicode 字符问题（全角括号）
- 文件重命名为 .sh 后缀以明确标识为 shell 脚本
